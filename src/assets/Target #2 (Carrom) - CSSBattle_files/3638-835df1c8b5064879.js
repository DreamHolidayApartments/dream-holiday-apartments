"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3638],{4807:function(e,t,a){a.d(t,{E:function(){return _},i:function(){return N}});var i=a(865),s=a(6670),r=a(2322),l=a(9097),n=a.n(l),c=a(2784),d=a(7037),o=a(3552),h=a(1251),g=a(1551),u=a(4030),m=a(7500),p=a(5598),x=a(7841),f=a(9604),y=a(9376),j=a(2367);function v(e){var t,a=e.data,i=e.playerData,s=void 0===i?{}:i,l=e.stats,d=e.unlockDate,u=e.gameMode,m=(0,c.useContext)(o.S),f=(0,c.useState)(!a.id),j=f[0],v=f[1];(0,c.useEffect)((function(){v(!a.id)}),[a.id]),a.image=j?a.isOpen?"/targets/0-open.png":"/targets/0.png?v=2":a.image;var N=null===(t=a.image)||void 0===t?void 0:t.replace(/\.png/,"@2x.png");return(0,r.jsxs)("div",{className:"target-tile ".concat(a.id?"":"target-tile--dummy"," ").concat(a.isOpen?"target-tile--public":""," ").concat(l&&l.highscore.playerProfile.userId===(null===m||void 0===m?void 0:m.uid)&&"target-tile--glowing"),children:[(0,r.jsxs)("div",{className:"target-top-info",children:[a.id?(0,r.jsx)("p",{className:"target-top-info__pill",children:a.id.length>5&&a.name||"#".concat(a.id)}):null,a.isOpen?(0,r.jsx)("p",{className:"target-top-info__pill",children:(0,r.jsx)("img",{alt:"",src:"/images/open-book.svg"})}):null]}),(0,r.jsxs)(p.VStack,{gap:"1rem",align:"stretch",fullHeight:!0,children:[a.id&&(0,r.jsx)(n(),{href:"/play/".concat(a.id),children:(0,r.jsx)("a",{className:"shadow-link",title:"Play target number ".concat(a.id)})}),a.id?(0,r.jsx)("img",{src:a.image,srcSet:"".concat(N," 2x"),alt:"",loading:"lazy",className:"target-tile__image"}):(0,r.jsx)(y.d,{opacity:"0.01",children:(0,r.jsx)("img",{src:"/images/lock.svg",width:"33",height:"43",style:{opacity:.75}})}),(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsxs)(p.VStack,{gap:"0",align:"stretch",justify:"space-around",fullHeight:!0,children:[l&&"firstToMatch"!==u?(0,r.jsx)("div",{children:(0,r.jsxs)(p.VStack,{gap:"1rem",children:[(0,r.jsx)(h.qE,{small:!0,size:"40",url:l.highscore.playerProfile.avatar,userId:l.highscore.playerProfile.userId,isPro:l.highscore.playerProfile.isPro,username:l.highscore.playerProfile.username,className:"target-highscore__avatar"}),(0,r.jsxs)(p.VStack,{gap:"0.4rem",children:[(0,r.jsx)(h.Rj,{name:l.highscore.playerProfile.displayName,username:l.highscore.playerProfile.username,userId:l.highscore.playerProfile.userId,ellipsis:!0,rank:1}),(0,r.jsxs)("p",{className:"target-highscore__score",children:[l.highscore.score," ","firstToMatch"!==u?(0,r.jsxs)("span",{children:["{",l.highscore.codeSize,"}"]}):null]})]})]})}):null,!l&&!j&&(0,r.jsx)("div",{children:(0,r.jsxs)(p.VStack,{gap:"0.25rem",children:[(0,r.jsx)(x.x,{mono:!1,size:4,weight:500,appearance:"tertiary",children:"\ud83d\ude2d"}),(0,r.jsx)(x.x,{mono:!1,size:1,weight:500,appearance:"secondary",children:"No highscore yet"}),(0,r.jsx)(x.x,{mono:!1,size:0,weight:500,appearance:"tertiary",children:"Be the first?"})]})}),j&&d?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"daily-target-text",style:{padding:"1rem 1rem 0.5rem"},children:[(0,r.jsx)("p",{className:"daily-target-text__title",style:{textAlign:"center"},children:"Unlocks in"}),(0,r.jsx)("div",{style:{marginTop:"1rem"},children:(0,r.jsx)(g.W,{showEmoji:!1,suffix:"",date:d,size:"0.1",showUnits:!0,maxLength:2,justify:"center"})})]})}):null,m&&!j&&(0,r.jsx)("div",{style:{marginTop:"1rem"},children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"target-attempts",children:(0,r.jsx)("p",{className:"target-attempts__item  target-attempts__item--score ".concat(!s.score&&"target-attempts__item--not-played"),children:l&&l.highscore.playerProfile.userId===(null===m||void 0===m?void 0:m.uid)?(0,r.jsx)("span",{children:"That's you!"}):s.score?(0,r.jsxs)("span",{children:["You - ",s.score," ","firstToMatch"!==u?(0,r.jsxs)("span",{children:["{",s.codeSize||"-","}"]}):null]}):(0,r.jsx)("span",{children:"You - Not played"})})})})})]})}),a.isOpen?(0,r.jsx)("div",{className:"public-target-message",children:(0,r.jsxs)("p",{children:['This is an "Open" Target. Open Targets have all the top solutions public.'," ",(0,r.jsx)("a",{className:"link",href:"/blog/introducing-open-targets/",children:"Learn More"})]})}):null]})]})}function N(e){var t,a=e.target,i=e.showTags,s=e.data,l=e.lazy,d=void 0===l||l,o=e.useCdnUrl,h=e.children;a.image=p?a.isOpen?"/targets/0-open.png":"/targets/0.png?v=2":a.image;var g=o?(0,j.X2)(a.image):a.image,u=null===(t=a.image)||void 0===t?void 0:t.replace(/\.png/,"@2x.png");u=o?(0,j.X2)(u):u;var m=(0,c.useState)(!a.id),p=m[0],x=m[1];return(0,c.useEffect)((function(){x(!a.id)}),[a.id]),(0,r.jsxs)("div",{className:"target-tile--daily  target-tile ".concat(a.id?"":"target-tile--dummy"," ").concat(a.isOpen?"target-tile--public":""),children:[a.id&&"dummy"!==a.id&&(0,r.jsx)(n(),{href:"/play/".concat(a.id),children:(0,r.jsx)("a",{className:"shadow-link",title:"Play target for ".concat((0,j.Jp)(a.startDate,{showTime:!1,utc:!0}))})}),"dummy"===a.id?(0,r.jsx)(y.d,{children:(0,r.jsx)("img",{src:"/images/lock.svg",width:"33",height:"43",style:{opacity:.75}})}):(0,r.jsx)("img",{src:g,srcSet:"".concat(u," 2x"),alt:"",loading:d?"lazy":"eager",className:"target-tile__image"}),i&&(0,r.jsx)("div",{className:"target-tile__info",children:(0,r.jsx)("div",{className:"target-top-info",children:a?(0,r.jsxs)("p",{className:"target-top-info__pill",children:[s?(0,r.jsx)(f.J,{name:"tick",size:"1em",color:"white"}):null," ",a.formattedDate]}):null})}),h]})}function _(e){var t=(0,c.useState)(),a=t[0],l=t[1],n=(0,c.useState)(),o=n[0],h=n[1],g=e.gameMode;return(0,c.useEffect)((function(){if(l(),h(),e.data.id){var t=e.data.id;return(0,d.GT)(e.data.id).then((function(a){t===e.data.id&&l(a)})),function(){t=null}}}),[e.data.id]),(0,c.useEffect)((function(){var t=g===m.BattleGameModes.FIRST_TO_MATCH?0:Math.floor(e.index/(e.targetBatchSize||2));if(e.battleStartDate){var a=(0,u.normalizeDate)(e.battleStartDate);a.setDate(a.getDate()+7*t),h(a)}}),[e.data.id]),(0,r.jsx)(v,(0,s.Z)((0,i.Z)({},e),{stats:a,unlockDate:o,gameMode:g}))}},2173:function(e,t,a){a.d(t,{c:function(){return y}});var i=a(2322),s=a(9097),r=a.n(s),l=a(2784),n=a(7037),c=a(5598),d=a(4807),o=(a(9241),a(9604)),h=a(4030),g=a(1551),u=a(1893),m=function(e){var t=e.width;return(0,i.jsx)("div",{className:"skeleton",style:{width:t}})},p=a(2367),x=a(3552),f=a(8387),y=function(e){var t=e.target,a=e.showDateInside,s=e.lazy,y=void 0===s||s,j=(0,u.a)(),v=(0,l.useState)(!1),N=v[0],_=v[1],k=(0,l.useState)(),S=k[0],b=k[1],w=(0,l.useState)(""),T=w[0],D=w[1],z=(0,l.useContext)(x.k).streak;(0,l.useEffect)((function(){S&&t&&D((0,p.qA)({score:S.score,codeSize:S.codeSize,levelId:t.id,isDaily:!0,date:t.formattedDate,streak:null===z||void 0===z?void 0:z.count}))}),[t,S]),(0,l.useEffect)((function(){"dummy"!==t.id&&(null===j||void 0===j?void 0:j.uid)&&(_(!0),(0,n.kP)({playerId:j.uid,levelId:t.id}).then((function(e){b(e)})).finally((function(){_(!1)})))}),[null===t||void 0===t?void 0:t.id,null===j||void 0===j?void 0:j.uid]);var P=(0,h.isTodaysDailyTarget)(t),E=(0,h.isYesterdaysDailyTarget)(t);return(0,i.jsxs)(c.VStack,{gap:"1rem",children:[!a&&(0,i.jsxs)("div",{className:"pill ".concat(S?"pill--success":""," "),children:[S?(0,i.jsx)(o.J,{name:"tick",size:"1em",color:"white"}):null," ",t.formattedDate,P?" (Today) ":""]}),(0,i.jsx)("div",{className:P?"target-today":"",children:(0,i.jsx)(d.i,{target:t,data:S,showTags:a,lazy:y,useCdnUrl:!0,children:(0,i.jsx)("div",{style:{padding:"1rem 1rem 0.5rem"},children:"dummy"!==t.id?(0,i.jsxs)(c.HStack,{justify:"space-between",children:[(0,i.jsx)("div",{className:"daily-target-text",children:(0,i.jsxs)(c.VStack,{gap:"0",align:"flex-start",children:[(0,i.jsx)("p",{className:"daily-target-text__title",children:"Your hi-score"}),(0,i.jsx)("div",{className:"daily-target-text__score",children:N?(0,i.jsx)(m,{width:"6ch"}):S?"".concat(S.score," {").concat(S.codeSize,"}"):"Not played"})]})}),(0,i.jsxs)(c.HStack,{extend:!0,gap:"0.5rem",children:[P&&S?(0,i.jsx)("a",{href:"https://twitter.com/share?url=https://cssbattle.dev/play/".concat(null===t||void 0===t?void 0:t.id,"&text=").concat(T,"&hashtags=CSSBattleChallenge&via=css_battle&related=css_battle"),target:"_blank",rel:"external noopener noreferrer",className:"button button--circular",children:(0,i.jsx)(o.J,{name:"twitter",color:"var(--clr-text-light)",marginRight:"0",size:"20"})}):null,E&&!(null===j||void 0===j?void 0:j.isPro)?(0,i.jsx)(r(),{href:{pathname:"/play/".concat(t.id),query:{openTopSolutions:!0}},children:(0,i.jsx)("a",{className:(0,h.isTodaysDailyTarget)(t)?"button--primary button button--circular":"button button--circular",children:(0,i.jsx)(o.J,{name:"open-book",color:(0,h.isTodaysDailyTarget)(t)?"var(--clr-btn-text)":"var(--clr-text-light)",marginRight:"0",size:"20"})})}):P||(null===j||void 0===j?void 0:j.isPro)?(0,i.jsx)(r(),{href:"/play/".concat(t.id),children:(0,i.jsx)("a",{className:(0,h.isTodaysDailyTarget)(t)?"button--primary button button--circular":"button button--circular",children:(0,i.jsx)(o.J,{name:"play",color:(0,h.isTodaysDailyTarget)(t)?"var(--clr-btn-text)":"var(--clr-text-light)",marginRight:"0",size:"20"})})}):(0,i.jsx)(f.Z,{})]})]}):(0,i.jsxs)("div",{className:"daily-target-text",children:[(0,i.jsx)("p",{className:"daily-target-text__title",style:{textAlign:"center"},children:"Unlocks in"}),(0,i.jsx)("div",{style:{marginTop:"0.5rem"},children:(0,i.jsx)(g.W,{showEmoji:!1,suffix:"",date:1e3*t.date,size:"0.1",showUnits:!1})})]})})})})]})}},3638:function(e,t,a){a.d(t,{J:function(){return h}});var i=a(2322),s=a(2784),r=a(7037),l=a(5416),n=a(5598),c=a(9241),d=a(2173),o=a(2367),h=function(e){var t=e.showFreeOnly,a=e.count,h=void 0===a?6:a,g=(0,s.useState)(),u=g[0],m=g[1];return(0,s.useEffect)((function(){(0,r.rz)(h).then((function(e){var a=e.slice();a.forEach((function(e,t){e.formattedDate=(0,o.dQ)(e.startDate)})),(t||(0,o.tq)())&&(a=a.slice(0,2));var i=+new Date(a[0].startDate.seconds)+86400;a.reverse().push({id:"dummy",image:"/targets/0.png?v=2",formattedDate:"Tomorrow",date:i}),m(a)}))}),[]),(0,s.useEffect)((function(){if(!(0,o.tq)()){var e=document.querySelector(".target-today");e&&e.scrollIntoView({inline:"center",block:"nearest"})}}),[u]),(0,i.jsxs)(l.s,{padding:"0",topFocus:t,children:[(0,i.jsx)("div",{style:{padding:"2rem"},className:"home-daily-target-panel no-scrollbar",children:u?(0,i.jsx)(n.HStack,{gap:"2rem",align:"flex-start",justify:t&&!(0,o.tq)()?"center":"flex-start",children:u.map((function(e,a){return(0,i.jsx)("div",{style:{paddingLeft:0!=a||(0,o.tq)()||t?0:"10%",paddingRight:"dummy"!=e.id||t?0:"40%"},children:(0,i.jsx)(d.c,{target:e,lazy:!1})},e.id)}))}):(0,i.jsx)(c.R,{children:"Fetching Daily targets..."})}),(0,i.jsx)("div",{className:"".concat(!t&&"daily-targets-shadowed")})]})}}}]);
//# sourceMappingURL=3638-835df1c8b5064879.js.map